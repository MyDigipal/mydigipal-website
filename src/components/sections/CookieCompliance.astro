---
import { type Language } from '@/i18n/config';
import Icon from '@/components/ui/Icon.astro';

interface Props {
  lang: Language;
}

const { lang } = Astro.props;

const translations = {
  en: {
    badge: "Privacy & Compliance",
    headline: "GDPR-Compliant Tracking",
    subtitle: "Collect the data you need while respecting user privacy and regulatory requirements.",
    features: [
      {
        icon: "shield",
        title: "Consent Management",
        description: "Implement proper cookie consent banners that actually work - blocking tags until consent is given.",
        highlight: "GDPR Ready"
      },
      {
        icon: "toggle-right",
        title: "Google Consent Mode v2",
        description: "Advanced consent signals to Google Ads and Analytics, maintaining measurement while respecting choices.",
        highlight: "Required 2024+"
      },
      {
        icon: "server",
        title: "Server-Side Tracking",
        description: "First-party data collection that's more resilient to ad blockers and browser restrictions.",
        highlight: "Future-Proof"
      },
      {
        icon: "file-text",
        title: "Privacy Documentation",
        description: "Clear cookie policies and data processing records to keep your legal team happy.",
        highlight: "Audit-Ready"
      }
    ],
    cmpLogos: ["Cookiebot", "OneTrust", "Axeptio", "Didomi"],
    cmpLabel: "We work with leading Consent Management Platforms"
  },
  fr: {
    badge: "Privacy & Conformité",
    headline: "Tracking Conforme RGPD",
    subtitle: "Collectez les données dont vous avez besoin tout en respectant la vie privée et les exigences réglementaires.",
    features: [
      {
        icon: "shield",
        title: "Gestion du Consentement",
        description: "Implémentez des bannières cookies qui fonctionnent vraiment - bloquant les tags jusqu'au consentement.",
        highlight: "RGPD Ready"
      },
      {
        icon: "toggle-right",
        title: "Google Consent Mode v2",
        description: "Signaux de consentement avancés vers Google Ads et Analytics, maintenant la mesure tout en respectant les choix.",
        highlight: "Requis 2024+"
      },
      {
        icon: "server",
        title: "Tracking Server-Side",
        description: "Collecte de données first-party plus résiliente aux ad blockers et restrictions navigateurs.",
        highlight: "Future-Proof"
      },
      {
        icon: "file-text",
        title: "Documentation Privacy",
        description: "Politiques cookies claires et registres de traitement pour satisfaire votre équipe juridique.",
        highlight: "Prêt pour Audit"
      }
    ],
    cmpLogos: ["Cookiebot", "OneTrust", "Axeptio", "Didomi"],
    cmpLabel: "Nous travaillons avec les principales plateformes de gestion du consentement"
  }
};

const t = translations[lang] || translations.en;
---

<section class="py-24 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white">
  <div class="container-custom">
    <!-- Header -->
    <div class="text-center mb-16 animate-on-scroll">
      <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-teal-500/20 text-teal-300 font-medium mb-6">
        <Icon name="lock" size={16} />
        <span>{t.badge}</span>
      </div>
      <h2 class="text-4xl md:text-5xl font-bold text-white mb-4">
        {t.headline}
      </h2>
      <p class="text-xl text-slate-300 max-w-2xl mx-auto">
        {t.subtitle}
      </p>
    </div>

    <!-- Features Grid -->
    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-16">
      {t.features.map((feature, index) => (
        <div
          class="compliance-card group p-6 bg-white/5 backdrop-blur-sm rounded-2xl border border-white/10 hover:border-teal-500/50 hover:bg-white/10 transition-all duration-300 animate-on-scroll"
          style={`animation-delay: ${index * 100}ms`}
        >
          <div class="flex items-center justify-between mb-4">
            <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-teal-500 to-cyan-600 flex items-center justify-center">
              <Icon name={feature.icon} size={24} class="text-white" />
            </div>
            <span class="text-xs px-2 py-1 bg-teal-500/20 text-teal-300 rounded-full">
              {feature.highlight}
            </span>
          </div>
          <h3 class="text-lg font-bold text-white mb-2">{feature.title}</h3>
          <p class="text-sm text-slate-400">{feature.description}</p>
        </div>
      ))}
    </div>

    <!-- CMP Logos -->
    <div class="text-center animate-on-scroll">
      <p class="text-sm text-slate-400 mb-6">{t.cmpLabel}</p>
      <div class="flex flex-wrap justify-center gap-8">
        {t.cmpLogos.map((name) => (
          <div class="px-6 py-3 bg-white/10 rounded-xl text-white/80 font-medium hover:bg-white/20 transition-colors">
            {name}
          </div>
        ))}
      </div>
    </div>
  </div>
</section>

<style>
  .animate-on-scroll {
    animation: fade-up 0.6s ease forwards;
    opacity: 0;
    transform: translateY(20px);
  }

  @keyframes fade-up {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
