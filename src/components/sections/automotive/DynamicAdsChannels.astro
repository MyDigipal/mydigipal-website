---
import type { Language } from '@/i18n/config';
import Icon from '@/components/ui/Icon.astro';

interface Props {
  lang: Language;
  color?: 'automotive' | 'ads' | 'social' | 'primary';
}

const { lang, color = 'automotive' } = Astro.props;

const translations = {
  en: {
    title: 'One Catalog, All Platforms',
    subtitle: 'Your vehicle inventory automatically displays across the most powerful advertising networks',
    channels: [
      {
        name: 'Facebook',
        icon: 'facebook',
        color: 'from-blue-600 to-blue-700',
        shadow: 'shadow-blue-500/30',
        description: 'Reach billions of users with personalized vehicle ads in their news feed and marketplace',
        features: ['News Feed Ads', 'Marketplace Integration', 'Carousel Formats', 'Lead Generation Forms'],
        reach: '2.9B',
        reachLabel: 'Monthly Users'
      },
      {
        name: 'Instagram',
        icon: 'instagram',
        color: 'from-pink-500 via-purple-500 to-orange-400',
        shadow: 'shadow-pink-500/30',
        description: 'Showcase your vehicles with stunning visuals to an engaged, younger audience',
        features: ['Stories & Reels', 'Feed Posts', 'Shop Integration', 'Visual Discovery'],
        reach: '2B',
        reachLabel: 'Monthly Users'
      },
      {
        name: 'Google Display',
        icon: 'globe',
        color: 'from-emerald-500 to-teal-600',
        shadow: 'shadow-emerald-500/30',
        description: 'Appear across millions of websites and apps when users research vehicles',
        features: ['Display Network', 'Discovery Ads', 'YouTube Placements', 'Gmail Ads'],
        reach: '90%',
        reachLabel: 'Internet Reach'
      }
    ],
    learnMore: 'Learn More'
  },
  fr: {
    title: 'Un Catalogue, Toutes les Plateformes',
    subtitle: 'Votre inventaire de véhicules s\'affiche automatiquement sur les réseaux publicitaires les plus puissants',
    channels: [
      {
        name: 'Facebook',
        icon: 'facebook',
        color: 'from-blue-600 to-blue-700',
        shadow: 'shadow-blue-500/30',
        description: 'Touchez des milliards d\'utilisateurs avec des annonces personnalisées dans leur fil d\'actualité et marketplace',
        features: ['Publicités Fil d\'Actualité', 'Intégration Marketplace', 'Formats Carrousel', 'Formulaires Lead Gen'],
        reach: '2.9B',
        reachLabel: 'Utilisateurs Mensuels'
      },
      {
        name: 'Instagram',
        icon: 'instagram',
        color: 'from-pink-500 via-purple-500 to-orange-400',
        shadow: 'shadow-pink-500/30',
        description: 'Présentez vos véhicules avec des visuels époustouflants à une audience jeune et engagée',
        features: ['Stories & Reels', 'Publications Feed', 'Intégration Shop', 'Découverte Visuelle'],
        reach: '2B',
        reachLabel: 'Utilisateurs Mensuels'
      },
      {
        name: 'Google Display',
        icon: 'globe',
        color: 'from-emerald-500 to-teal-600',
        shadow: 'shadow-emerald-500/30',
        description: 'Apparaissez sur des millions de sites et apps quand les utilisateurs recherchent des véhicules',
        features: ['Réseau Display', 'Discovery Ads', 'Placements YouTube', 'Annonces Gmail'],
        reach: '90%',
        reachLabel: 'Couverture Internet'
      }
    ],
    learnMore: 'En Savoir Plus'
  }
};

const t = translations[lang] || translations.en;
---

<section class="section bg-gradient-to-b from-slate-900 to-slate-800 text-white overflow-hidden">
  <!-- Background Pattern -->
  <div class="absolute inset-0 pointer-events-none overflow-hidden">
    <div class="absolute top-0 left-1/4 w-96 h-96 bg-sky-500/10 rounded-full blur-[120px]"></div>
    <div class="absolute bottom-0 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-[120px]"></div>
  </div>

  <div class="container-custom relative z-10">
    <!-- Header -->
    <div class="text-center max-w-3xl mx-auto mb-16 animate-on-scroll">
      <h2 class="heading-2 mb-4">{t.title}</h2>
      <p class="body-large text-slate-300">{t.subtitle}</p>
    </div>

    <!-- Channel Cards -->
    <div class="grid lg:grid-cols-3 gap-8">
      {t.channels.map((channel, index) => (
        <div
          class={`channel-card group relative rounded-3xl bg-white/5 backdrop-blur-sm border border-white/10 p-8 hover:bg-white/10 transition-all duration-500 animate-on-scroll hover:-translate-y-2`}
          style={`animation-delay: ${index * 150}ms`}
        >
          <!-- Floating Icon -->
          <div class={`absolute -top-8 left-8 w-16 h-16 rounded-2xl bg-gradient-to-br ${channel.color} ${channel.shadow} shadow-xl flex items-center justify-center transform group-hover:scale-110 group-hover:rotate-3 transition-all duration-300`}>
            <Icon name={channel.icon} size={32} class="text-white" />
          </div>

          <!-- Content -->
          <div class="mt-8">
            <h3 class="heading-4 text-white mb-3">{channel.name}</h3>
            <p class="text-slate-300 mb-6">{channel.description}</p>

            <!-- Features -->
            <ul class="space-y-2 mb-6">
              {channel.features.map((feature) => (
                <li class="flex items-center gap-2 text-sm text-slate-300">
                  <Icon name="check" size={16} class="text-sky-400" />
                  {feature}
                </li>
              ))}
            </ul>

            <!-- Reach Stat -->
            <div class="pt-6 border-t border-white/10">
              <div class="flex items-baseline gap-2">
                <span class={`text-4xl font-bold bg-gradient-to-r ${channel.color} bg-clip-text text-transparent`}>
                  {channel.reach}
                </span>
                <span class="text-slate-400 text-sm">{channel.reachLabel}</span>
              </div>
            </div>
          </div>

          <!-- Animated Border -->
          <div class="absolute inset-0 rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500">
            <div class={`absolute inset-0 rounded-3xl bg-gradient-to-r ${channel.color} opacity-20`}></div>
          </div>
        </div>
      ))}
    </div>

    <!-- Connection Lines (Visual) -->
    <div class="hidden lg:block relative h-20 mt-8">
      <svg class="absolute inset-0 w-full h-full" preserveAspectRatio="none">
        <defs>
          <linearGradient id="lineGradient" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" style="stop-color:#0ea5e9;stop-opacity:0.5" />
            <stop offset="50%" style="stop-color:#a855f7;stop-opacity:0.5" />
            <stop offset="100%" style="stop-color:#10b981;stop-opacity:0.5" />
          </linearGradient>
        </defs>
        <path
          d="M 16.66% 0 L 16.66% 50% Q 16.66% 100% 50% 100% L 50% 100% Q 83.33% 100% 83.33% 50% L 83.33% 0"
          fill="none"
          stroke="url(#lineGradient)"
          stroke-width="2"
          stroke-dasharray="8 4"
          class="animate-dash"
        />
      </svg>

      <!-- Center Circle -->
      <div class="absolute left-1/2 bottom-0 transform -translate-x-1/2 translate-y-1/2 w-16 h-16 rounded-full bg-gradient-to-br from-sky-500 to-purple-600 flex items-center justify-center shadow-xl shadow-purple-500/30 z-10">
        <Icon name="zap" size={24} class="text-white" />
      </div>
    </div>

    <!-- Unified Message -->
    <div class="text-center mt-16 animate-on-scroll">
      <p class="text-lg text-slate-300 max-w-2xl mx-auto">
        {lang === 'fr'
          ? 'Un seul catalogue. Une seule configuration. Trois plateformes puissantes travaillant ensemble pour maximiser vos ventes.'
          : 'One catalog. One setup. Three powerful platforms working together to maximize your sales.'
        }
      </p>
    </div>
  </div>
</section>

<style>
  @keyframes dash {
    to {
      stroke-dashoffset: -24;
    }
  }

  .animate-dash {
    animation: dash 1s linear infinite;
  }
</style>
