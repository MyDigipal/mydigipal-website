---
import { type Language } from '@/i18n/config';
import Icon from '@/components/ui/Icon.astro';

interface Props {
  lang: Language;
}

const { lang } = Astro.props;

const translations = {
  en: {
    badge: "The B2B Funnel",
    headline: "Paid Media at Every Stage",
    subtitle: "While paid media is part of a broader B2B marketing strategy, it's instrumental at every stage of the buyer journey.",
    stages: [
      {
        name: "Awareness",
        icon: "eye",
        color: "from-blue-500 to-cyan-400",
        description: "Reach your target audience at scale with powerful and memorable brand ads. Create excitement around your brand and products.",
        tactics: ["Display Advertising", "YouTube Pre-roll", "LinkedIn Awareness", "Programmatic"]
      },
      {
        name: "Consideration",
        icon: "lightbulb",
        color: "from-cyan-500 to-teal-400",
        description: "Your audience needs to be educated. Engage them with short-form, informative content that addresses their challenges.",
        tactics: ["Thought Leadership", "Educational Content", "Webinar Promotion", "Case Studies"]
      },
      {
        name: "Lead Generation",
        icon: "user-plus",
        color: "from-indigo-500 to-purple-500",
        description: "Generate leads through value-gated content. Ebooks, whitepapers, and reports your audience will trade their details for.",
        tactics: ["LinkedIn Lead Gen", "Gated Content", "Landing Pages", "Form Optimization"]
      },
      {
        name: "Engagement",
        icon: "message-circle",
        color: "from-purple-500 to-pink-500",
        description: "The role of paid media doesn't end at lead generation. Engage prospects to move them through the funnel or upsell existing customers.",
        tactics: ["Retargeting", "ABM Campaigns", "Customer Marketing", "Cross-sell/Upsell"]
      }
    ]
  },
  fr: {
    badge: "Le Funnel B2B",
    headline: "Paid Media à Chaque Étape",
    subtitle: "Le paid media fait partie d'une stratégie B2B plus large, mais il est instrumental à chaque étape du parcours acheteur.",
    stages: [
      {
        name: "Awareness",
        icon: "eye",
        color: "from-blue-500 to-cyan-400",
        description: "Atteignez votre audience cible à grande échelle avec des publicités de marque puissantes. Créez de l'enthousiasme autour de votre marque.",
        tactics: ["Publicité Display", "YouTube Pre-roll", "LinkedIn Awareness", "Programmatique"]
      },
      {
        name: "Considération",
        icon: "lightbulb",
        color: "from-cyan-500 to-teal-400",
        description: "Votre audience a besoin d'être éduquée. Engagez-la avec du contenu court et informatif qui adresse ses défis.",
        tactics: ["Thought Leadership", "Contenu Éducatif", "Promotion Webinaire", "Études de Cas"]
      },
      {
        name: "Génération de Leads",
        icon: "user-plus",
        color: "from-indigo-500 to-purple-500",
        description: "Générez des leads via du contenu à valeur ajoutée. Ebooks, livres blancs et rapports contre lesquels votre audience échangera ses coordonnées.",
        tactics: ["LinkedIn Lead Gen", "Contenu Gated", "Landing Pages", "Optimisation Formulaires"]
      },
      {
        name: "Engagement",
        icon: "message-circle",
        color: "from-purple-500 to-pink-500",
        description: "Le rôle du paid media ne s'arrête pas à la génération de leads. Engagez vos prospects pour les faire avancer dans le funnel ou upseller les clients existants.",
        tactics: ["Retargeting", "Campagnes ABM", "Customer Marketing", "Cross-sell/Upsell"]
      }
    ]
  }
};

const t = translations[lang] || translations.en;
---

<section class="py-24 bg-gradient-to-b from-slate-900 to-indigo-950 text-white overflow-hidden">
  <div class="container-custom relative">
    <!-- Background Effects -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none">
      <div class="absolute top-1/4 left-1/4 w-96 h-96 bg-indigo-500/10 rounded-full blur-3xl"></div>
      <div class="absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl"></div>
    </div>

    <div class="relative z-10">
      <!-- Header -->
      <div class="text-center mb-16 animate-on-scroll">
        <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/10 text-indigo-300 font-medium mb-6 backdrop-blur-sm">
          <Icon name="filter" size={16} />
          <span>{t.badge}</span>
        </div>
        <h2 class="text-4xl md:text-5xl font-bold text-white mb-4">
          {t.headline}
        </h2>
        <p class="text-xl text-slate-300 max-w-3xl mx-auto">
          {t.subtitle}
        </p>
      </div>

      <!-- Funnel Stages -->
      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
        {t.stages.map((stage, index) => (
          <div
            class="funnel-stage group relative animate-on-scroll"
            style={`animation-delay: ${index * 100}ms`}
          >
            <!-- Card -->
            <div class="relative p-6 bg-white/5 backdrop-blur-sm rounded-2xl border border-white/10 hover:border-white/20 hover:bg-white/10 transition-all duration-500 h-full">
              <!-- Stage Number -->
              <div class="absolute -top-3 -left-3 w-8 h-8 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-sm font-bold shadow-lg">
                {index + 1}
              </div>

              <!-- Icon -->
              <div class={`w-14 h-14 rounded-xl bg-gradient-to-br ${stage.color} flex items-center justify-center mb-5 group-hover:scale-110 transition-transform duration-300 shadow-lg`}>
                <Icon name={stage.icon} size={28} class="text-white" />
              </div>

              <!-- Content -->
              <h3 class="text-xl font-bold text-white mb-3">{stage.name}</h3>
              <p class="text-slate-300 text-sm mb-5 leading-relaxed">{stage.description}</p>

              <!-- Tactics -->
              <div class="flex flex-wrap gap-2">
                {stage.tactics.map(tactic => (
                  <span class="px-2 py-1 text-xs bg-white/10 text-slate-300 rounded-md">
                    {tactic}
                  </span>
                ))}
              </div>
            </div>

            <!-- Arrow (hidden on last item) -->
            {index < t.stages.length - 1 && (
              <div class="hidden lg:flex absolute top-1/2 -right-3 transform -translate-y-1/2 z-20">
                <svg class="w-6 h-6 text-indigo-400" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M10 6l6 6-6 6V6z" />
                </svg>
              </div>
            )}
          </div>
        ))}
      </div>
    </div>
  </div>
</section>

<style>
  .funnel-stage {
    animation: fade-up 0.6s ease forwards;
    opacity: 0;
    transform: translateY(30px);
  }

  @keyframes fade-up {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
