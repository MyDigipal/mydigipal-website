---
import { type Language } from '@/i18n/config';
import { t } from '@/i18n/utils';
import Button from '@/components/ui/Button.astro';
import Icon from '@/components/ui/Icon.astro';

interface Props {
  lang: Language;
  badge?: string;
  headline: string;
  subheadline?: string;
  description: string;
  color?: 'seo' | 'ads' | 'social' | 'abm' | 'primary';
}

const { lang, badge, headline, subheadline, description, color = 'primary' } = Astro.props;

const colorConfig = {
  seo: {
    gradient: 'from-emerald-500 to-teal-600',
    light: 'bg-emerald-50 text-emerald-600',
    glow: 'shadow-emerald-500/25',
    accent: 'text-emerald-500',
  },
  ads: {
    gradient: 'from-amber-500 to-orange-600',
    light: 'bg-amber-50 text-amber-600',
    glow: 'shadow-amber-500/25',
    accent: 'text-amber-500',
  },
  social: {
    gradient: 'from-violet-500 to-purple-600',
    light: 'bg-violet-50 text-violet-600',
    glow: 'shadow-violet-500/25',
    accent: 'text-violet-500',
  },
  abm: {
    gradient: 'from-pink-500 to-rose-600',
    light: 'bg-pink-50 text-pink-600',
    glow: 'shadow-pink-500/25',
    accent: 'text-pink-500',
  },
  primary: {
    gradient: 'from-blue-500 to-indigo-600',
    light: 'bg-blue-50 text-blue-600',
    glow: 'shadow-blue-500/25',
    accent: 'text-blue-500',
  },
};

const colors = colorConfig[color];
---

<section class="hero-section relative min-h-screen flex items-center overflow-hidden bg-slate-950">
  <!-- Animated Background with Parallax -->
  <div class="absolute inset-0 pointer-events-none">
    <!-- Main gradient orbs - will move with mouse -->
    <div
      class={`parallax-orb orb-1 absolute w-[500px] h-[500px] bg-gradient-to-r ${colors.gradient} rounded-full blur-[100px] opacity-30`}
      data-speed="0.05"
    ></div>
    <div
      class={`parallax-orb orb-2 absolute w-[400px] h-[400px] bg-gradient-to-r ${colors.gradient} rounded-full blur-[80px] opacity-25`}
      data-speed="0.03"
    ></div>
    <div
      class={`parallax-orb orb-3 absolute w-[300px] h-[300px] bg-gradient-to-br from-purple-500 to-pink-500 rounded-full blur-[60px] opacity-20`}
      data-speed="0.07"
    ></div>
    <div
      class="parallax-orb orb-4 absolute w-[600px] h-[600px] bg-gradient-to-r from-slate-800 to-slate-900 rounded-full blur-[100px] opacity-60"
      data-speed="0.02"
    ></div>

    <!-- Floating particles -->
    <div class="particles">
      {Array.from({ length: 20 }).map((_, i) => (
        <div
          class={`particle absolute w-1 h-1 rounded-full bg-gradient-to-r ${colors.gradient} opacity-40`}
          style={`
            left: ${Math.random() * 100}%;
            top: ${Math.random() * 100}%;
            animation-delay: ${Math.random() * 5}s;
            animation-duration: ${3 + Math.random() * 4}s;
          `}
        ></div>
      ))}
    </div>

    <!-- Grid pattern -->
    <div class="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGZpbGw9IiMxZTI5M2IiIGQ9Ik0wIDBoNjB2NjBIMHoiLz48cGF0aCBkPSJNNjAgMEgwdjYwaDYwVjB6TTEgMWg1OHY1OEgxVjF6IiBmaWxsPSIjMzM0MTU1IiBmaWxsLW9wYWNpdHk9Ii4zIi8+PC9nPjwvc3ZnPg==')] opacity-10"></div>

    <!-- Radial gradient overlay -->
    <div class="absolute inset-0 bg-gradient-to-b from-transparent via-slate-950/50 to-slate-950"></div>
  </div>

  <!-- Content -->
  <div class="relative z-10 container-custom py-20 pb-32">
    <div class="max-w-4xl mx-auto text-center">
      <!-- Badge -->
      {badge && (
        <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/10 backdrop-blur-sm border border-white/10 mb-8 animate-fade-in-down">
          <span class={`w-2 h-2 rounded-full bg-gradient-to-r ${colors.gradient} animate-pulse`}></span>
          <span class="text-white/90 font-medium">{badge}</span>
          <span class="text-white/60">âœ¨</span>
        </div>
      )}

      <!-- Headline with gradient -->
      <h1 class="text-5xl sm:text-6xl lg:text-7xl font-bold text-white mb-6 leading-tight">
        <span class="hero-text-reveal">{headline}</span>
      </h1>

      <!-- Subheadline -->
      {subheadline && (
        <p class={`text-xl sm:text-2xl font-medium ${colors.accent} mb-6 animate-fade-in animation-delay-300`}>
          {subheadline}
        </p>
      )}

      <!-- Description -->
      <p class="text-lg text-slate-400 max-w-2xl mx-auto mb-10 animate-fade-in animation-delay-500">
        {description}
      </p>

      <!-- CTA Buttons -->
      <div class="flex flex-wrap justify-center gap-4 animate-fade-in animation-delay-700">
        <a
          href={`/${lang}/contact`}
          class={`group inline-flex items-center gap-3 px-8 py-4 rounded-xl bg-gradient-to-r ${colors.gradient} text-white font-semibold text-lg shadow-xl ${colors.glow} hover:shadow-2xl hover:scale-105 transition-all duration-300`}
        >
          <span>ðŸš€</span>
          {t(lang, 'cta.startProject')}
          <Icon name="arrow-right" size={20} class="group-hover:translate-x-1 transition-transform" />
        </a>
        <a
          href={`/${lang}/case-studies`}
          class="inline-flex items-center gap-3 px-8 py-4 rounded-xl bg-white/10 backdrop-blur-sm border border-white/20 text-white font-semibold text-lg hover:bg-white/20 hover:scale-105 transition-all duration-300"
        >
          <span>ðŸ“Š</span>
          {t(lang, 'cta.viewCaseStudies')}
        </a>
      </div>
    </div>
  </div>

  <!-- Scroll indicator - positioned at very bottom -->
  <div class="absolute bottom-4 left-1/2 -translate-x-1/2 z-20 animate-bounce">
    <div class="flex flex-col items-center gap-1 text-white/30 hover:text-white/50 transition-colors cursor-pointer">
      <span class="text-xs uppercase tracking-wider">Scroll</span>
      <Icon name="chevron-down" size={20} />
    </div>
  </div>
</section>

<style>
  /* Orb positions */
  .orb-1 {
    top: 10%;
    left: -10%;
  }
  .orb-2 {
    bottom: 20%;
    right: -5%;
  }
  .orb-3 {
    top: 50%;
    left: 60%;
    transform: translate(-50%, -50%);
  }
  .orb-4 {
    top: 40%;
    left: 30%;
  }

  /* Particle animation */
  .particle {
    animation: float-particle linear infinite;
  }

  @keyframes float-particle {
    0%, 100% {
      transform: translateY(0) translateX(0) scale(1);
      opacity: 0;
    }
    10% {
      opacity: 0.4;
    }
    50% {
      transform: translateY(-100px) translateX(20px) scale(1.5);
      opacity: 0.6;
    }
    90% {
      opacity: 0.4;
    }
  }

  /* Text reveal animation */
  .hero-text-reveal {
    background: linear-gradient(90deg, #fff 0%, #fff 50%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0.3) 100%);
    background-size: 200% 100%;
    -webkit-background-clip: text;
    background-clip: text;
    animation: text-reveal 1s ease forwards;
  }

  @keyframes text-reveal {
    from { background-position: 100% 0; }
    to { background-position: 0% 0; }
  }

  /* Animation delays */
  .animation-delay-300 { animation-delay: 300ms; }
  .animation-delay-500 { animation-delay: 500ms; }
  .animation-delay-700 { animation-delay: 700ms; }

  /* Fade animations */
  @keyframes fade-in {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @keyframes fade-in-down {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .animate-fade-in {
    animation: fade-in 0.8s ease forwards;
    opacity: 0;
  }

  .animate-fade-in-down {
    animation: fade-in-down 0.8s ease forwards;
    opacity: 0;
  }
</style>

<script>
  // Mouse parallax effect for orbs
  const heroSection = document.querySelector('.hero-section');
  const orbs = document.querySelectorAll('.parallax-orb');

  if (heroSection && orbs.length > 0) {
    let mouseX = 0;
    let mouseY = 0;
    let currentX = 0;
    let currentY = 0;

    heroSection.addEventListener('mousemove', (e) => {
      const rect = heroSection.getBoundingClientRect();
      mouseX = (e.clientX - rect.left - rect.width / 2) / rect.width;
      mouseY = (e.clientY - rect.top - rect.height / 2) / rect.height;
    });

    function animate() {
      // Smooth interpolation
      currentX += (mouseX - currentX) * 0.05;
      currentY += (mouseY - currentY) * 0.05;

      orbs.forEach((orb) => {
        const speed = parseFloat(orb.getAttribute('data-speed') || '0.05');
        const x = currentX * 100 * speed;
        const y = currentY * 100 * speed;
        (orb as HTMLElement).style.transform = `translate(${x}px, ${y}px)`;
      });

      requestAnimationFrame(animate);
    }

    animate();
  }
</script>
