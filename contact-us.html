<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us - MyDigipal | Get Your Free Strategy Session</title>
    <meta name="description" content="Ready to accelerate your digital marketing? Contact MyDigipal for a free strategy session. No long-term commitments, just results.">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Main CSS -->
    <link rel="stylesheet" href="/css/main.css">
    
    <!-- Page-specific styles -->
    <style>
        /* Contact Hero Section */
        .contact-hero {
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--secondary-purple) 100%);
            color: var(--white);
            padding: calc(70px + var(--spacing-2xl)) var(--spacing-lg) var(--spacing-xl);
            text-align: center;
        }

        .contact-hero h1 {
            font-size: 3rem;
            font-weight: var(--font-bold);
            margin-bottom: var(--spacing-md);
            line-height: 1.2;
        }

        .contact-hero p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto var(--spacing-lg);
        }

        /* Contact Form Section */
        .contact-section {
            padding: var(--spacing-2xl) var(--spacing-lg);
            background: var(--light-gray);
        }

        .contact-container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .contact-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-2xl);
            align-items: start;
        }

        .contact-form {
            background: var(--white);
            padding: var(--spacing-2xl);
            border-radius: 16px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
        }

        .contact-form h2 {
            font-size: 1.8rem;
            font-weight: var(--font-semibold);
            margin-bottom: var(--spacing-lg);
            color: var(--dark-gray);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-md);
        }

        .form-group {
            margin-bottom: var(--spacing-lg);
        }

        .form-label {
            display: block;
            font-weight: var(--font-medium);
            color: var(--dark-gray);
            margin-bottom: var(--spacing-xs);
        }

        .form-label.required::after {
            content: " *";
            color: var(--error-red);
        }

        .form-input,
        .form-textarea,
        .form-select {
            width: 100%;
            padding: var(--spacing-md);
            border: 2px solid var(--gray-200);
            border-radius: var(--border-radius);
            font-family: inherit;
            font-size: var(--text-base);
            transition: var(--transition-fast);
        }

        .form-input:focus,
        .form-textarea:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 120px;
        }

        .submit-btn {
            width: 100%;
            background: var(--primary-blue);
            color: var(--white);
            border: none;
            padding: var(--spacing-md) var(--spacing-lg);
            border-radius: var(--border-radius);
            font-size: var(--text-lg);
            font-weight: var(--font-semibold);
            cursor: pointer;
            transition: var(--transition-medium);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-xs);
        }

        .submit-btn:hover {
            background: var(--blue-600);
            transform: translateY(-1px);
            box-shadow: 0 8px 20px rgba(14, 165, 233, 0.3);
        }

        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* Contact Info */
        .contact-info {
            padding: var(--spacing-xl);
        }

        .contact-info h3 {
            font-size: 1.5rem;
            font-weight: var(--font-semibold);
            margin-bottom: var(--spacing-lg);
            color: var(--dark-gray);
        }

        .info-item {
            display: flex;
            align-items: flex-start;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
            padding: var(--spacing-lg);
            background: var(--white);
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .info-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-purple));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .info-content h4 {
            font-weight: var(--font-semibold);
            margin-bottom: var(--spacing-xs);
            color: var(--dark-gray);
        }

        .info-content p {
            color: var(--medium-gray);
            margin: 0;
        }

        .guarantee-box {
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-purple));
            color: var(--white);
            padding: var(--spacing-xl);
            border-radius: 16px;
            text-align: center;
            margin-top: var(--spacing-xl);
        }

        .guarantee-box h4 {
            font-size: 1.3rem;
            font-weight: var(--font-semibold);
            margin-bottom: var(--spacing-sm);
        }

        .guarantee-box p {
            opacity: 0.9;
            margin: 0;
        }

        /* Success Message */
        .success-message {
            background: var(--success-green);
            color: var(--white);
            padding: var(--spacing-lg);
            border-radius: var(--border-radius);
            margin-bottom: var(--spacing-lg);
            display: none;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .success-message.show {
            display: flex;
        }

        /* Form Validation Styles */
        .form-input.valid {
            border-color: var(--success-green);
        }

        .form-input.invalid {
            border-color: var(--error-red);
        }

        .field-error {
            color: var(--error-red);
            font-size: var(--text-sm);
            margin-top: var(--spacing-xs);
            display: block;
        }

        /* Loading state */
        .loading {
            opacity: 0.6;
            pointer-events: none;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .contact-hero h1 {
                font-size: 2.2rem;
            }

            .contact-grid {
                grid-template-columns: 1fr;
                gap: var(--spacing-xl);
            }

            .contact-form {
                padding: var(--spacing-xl);
            }

            .form-row {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header (will be loaded by component) -->
    <div id="header"></div>

    <main>
        <!-- Contact Hero -->
        <section class="contact-hero">
            <div class="container">
                <h1 class="fade-in">Ready to Get Started?</h1>
                <p class="fade-in">Let's discuss how we can accelerate your marketing efforts and drive measurable growth. No long-term commitments, just results.</p>
            </div>
        </section>

        <!-- Contact Form Section -->
        <section class="contact-section">
            <div class="contact-container">
                <div class="contact-grid">
                    <!-- Contact Form -->
                    <div class="contact-form fade-in">
                        <div id="success-message" class="success-message">
                            <span>✓</span>
                            <span>Thank you! Your message has been sent successfully. We'll get back to you within 2 hours.</span>
                        </div>

                        <h2>Send us a message</h2>
                        
                        <form id="contactForm" data-lead-form="true" novalidate>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="firstName" class="form-label required">First Name</label>
                                    <input 
                                        type="text" 
                                        id="firstName" 
                                        name="firstName" 
                                        class="form-input" 
                                        required
                                        data-validate="required"
                                    >
                                </div>
                                <div class="form-group">
                                    <label for="lastName" class="form-label required">Last Name</label>
                                    <input 
                                        type="text" 
                                        id="lastName" 
                                        name="lastName" 
                                        class="form-input" 
                                        required
                                        data-validate="required"
                                    >
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="email" class="form-label required">Email Address</label>
                                <input 
                                    type="email" 
                                    id="email" 
                                    name="email" 
                                    class="form-input" 
                                    required
                                    data-validate="email"
                                >
                            </div>

                            <div class="form-group">
                                <label for="company" class="form-label">Company Name</label>
                                <input 
                                    type="text" 
                                    id="company" 
                                    name="company" 
                                    class="form-input"
                                >
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="service" class="form-label">Service Interest</label>
                                    <select id="service" name="service" class="form-select">
                                        <option value="">Select a service</option>
                                        <option value="abm">Account Based Marketing (ABM)</option>
                                        <option value="paid-social">Paid Social</option>
                                        <option value="paid-search">Paid Search</option>
                                        <option value="content-creation">Content Creation</option>
                                        <option value="marketing-automation">Marketing Automation</option>
                                        <option value="campaign-management">Campaign Management</option>
                                        <option value="ai-training">AI Training</option>
                                        <option value="automotive">Automotive Marketing</option>
                                        <option value="full-service">Full Service Marketing</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="budget" class="form-label">Monthly Budget Range</label>
                                    <select id="budget" name="budget" class="form-select">
                                        <option value="">Select budget range</option>
                                        <option value="under-5k">Under $5,000</option>
                                        <option value="5k-15k">$5,000 - $15,000</option>
                                        <option value="15k-50k">$15,000 - $50,000</option>
                                        <option value="50k-100k">$50,000 - $100,000</option>
                                        <option value="over-100k">Over $100,000</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="message" class="form-label required">Project Details</label>
                                <textarea 
                                    id="message" 
                                    name="message" 
                                    class="form-textarea" 
                                    required
                                    data-validate="required"
                                    placeholder="Tell us about your project goals, challenges, and what you'd like to achieve..."
                                ></textarea>
                            </div>

                            <button type="submit" class="submit-btn">
                                <span class="btn-text">Send Message</span>
                                <span class="btn-loading" style="display: none;">Sending...</span>
                            </button>
                        </form>
                    </div>

                    <!-- Contact Info -->
                    <div class="contact-info fade-in">
                        <h3>Get in Touch Directly</h3>
                        
                        <div class="info-item">
                            <div class="info-icon">📧</div>
                            <div class="info-content">
                                <h4>Email</h4>
                                <p>hello@mydigipal.com<br>Response within 2 hours</p>
                            </div>
                        </div>

                        <div class="info-item">
                            <div class="info-icon">📞</div>
                            <div class="info-content">
                                <h4>Phone</h4>
                                <p>+1 (555) 123-4567<br>Monday - Friday, 9 AM - 6 PM EST</p>
                            </div>
                        </div>

                        <div class="info-item">
                            <div class="info-icon">🌍</div>
                            <div class="info-content">
                                <h4>Global Coverage</h4>
                                <p>15+ countries served<br>24/7 support available</p>
                            </div>
                        </div>

                        <div class="guarantee-box">
                            <h4>Quick Response Guarantee</h4>
                            <p>We respond to all inquiries within 2 hours during business days. Get started with your project immediately.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer (will be loaded by component) -->
    <div id="footer"></div>

    <!-- Scripts -->
<script type="module">
    // Import the main app (includes GTM initialization)
    import app from '/js/app.js';
    
    // Import components and GTM functions
    import { loadHeader } from '/components/header.js';
    import { loadFooter } from '/components/footer.js';
    import { getGTM, trackLeadGeneration, trackFormStart, trackFormFieldFocus } from '/components/gtm.js';
        
        // Form tracking variables
        let formStartTime = null;
        let fieldsInteracted = new Set();
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('📞 Loading contact page...');
            
            // Load components
            loadHeader();
            loadFooter();
            
            // Initialize form and animations
            initScrollAnimations();
            initContactForm();
        });

        // Scroll animations
        function initScrollAnimations() {
            const animationObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        animationObserver.unobserve(entry.target);
                    }
                });
            }, {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            });

            const animatedElements = document.querySelectorAll('.fade-in');
            animatedElements.forEach(el => {
                animationObserver.observe(el);
            });
        }

        // Initialize contact form
        function initContactForm() {
            const form = document.getElementById('contactForm');
            if (!form) return;

            // Track form start on first interaction
            const formFields = form.querySelectorAll('input, textarea, select');
            formFields.forEach(field => {
                field.addEventListener('focus', () => {
                    if (!formStartTime) {
                        formStartTime = Date.now();
                        trackFormStart('contact', 'contactForm');
                    }
                    
                    // Track field focus
                    if (!fieldsInteracted.has(field.name)) {
                        fieldsInteracted.add(field.name);
                        trackFormFieldFocus(field.name, 'contact');
                    }
                }, { once: true });

                // Real-time validation
                field.addEventListener('blur', () => validateField(field));
                field.addEventListener('input', () => {
                    if (field.type === 'email' || field.hasAttribute('data-validate-realtime')) {
                        validateField(field);
                    }
                });
            });

            // Form submission
            form.addEventListener('submit', handleFormSubmit);

            // Track form abandon on page unload
            window.addEventListener('beforeunload', () => {
                if (formStartTime && fieldsInteracted.size > 0) {
                    const gtm = getGTM();
                    if (gtm) {
                        gtm.trackFormAbandon('contact', Date.now() - formStartTime, fieldsInteracted.size);
                    }
                }
            });
        }

        // Handle form submission
        function handleFormSubmit(event) {
            event.preventDefault();
            
            const form = event.target;
            const submitBtn = form.querySelector('.submit-btn');
            const btnText = submitBtn.querySelector('.btn-text');
            const btnLoading = submitBtn.querySelector('.btn-loading');
            
            // Validate form
            if (!validateForm(form)) {
                return;
            }

            // Show loading state
            submitBtn.disabled = true;
            submitBtn.classList.add('loading');
            btnText.style.display = 'none';
            btnLoading.style.display = 'inline';

            // Collect form data
            const formData = new FormData(form);
            const leadData = {
                name: `${formData.get('firstName')} ${formData.get('lastName')}`.trim(),
                firstName: formData.get('firstName'),
                lastName: formData.get('lastName'),
                email: formData.get('email'),
                company: formData.get('company'),
                service: formData.get('service'),
                budget: formData.get('budget'),
                message: formData.get('message'),
                completionTime: formStartTime ? Math.round((Date.now() - formStartTime) / 1000) : null
            };

            // Track lead generation with GTM
            trackLeadGeneration('contact', leadData);

            // Simulate form submission (replace with actual API call)
            setTimeout(() => {
                // Show success message
                const successMessage = document.getElementById('success-message');
                successMessage.classList.add('show');
                
                // Reset form
                form.reset();
                clearValidationStates(form);
                
                // Reset button
                submitBtn.disabled = false;
                submitBtn.classList.remove('loading');
                btnText.style.display = 'inline';
                btnLoading.style.display = 'none';
                
                // Reset tracking variables
                formStartTime = null;
                fieldsInteracted.clear();
                
                // Scroll to success message
                successMessage.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'center' 
                });
                
                // Hide success message after 10 seconds
                setTimeout(() => {
                    successMessage.classList.remove('show');
                }, 10000);
                
                console.log('✅ Lead form submitted:', leadData);
                
            }, 2000); // 2 second delay to simulate API call
        }

        // Validate entire form
        function validateForm(form) {
            let isValid = true;
            const requiredFields = form.querySelectorAll('[required]');
            
            requiredFields.forEach(field => {
                if (!validateField(field)) {
                    isValid = false;
                }
            });
            
            return isValid;
        }

        // Validate individual field
        function validateField(field) {
            const value = field.value.trim();
            let isValid = true;
            let errorMessage = '';
            
            // Remove existing error
            clearFieldError(field);
            
            // Required validation
            if (field.hasAttribute('required') && !value) {
                isValid = false;
                errorMessage = 'This field is required';
            }
            // Email validation
            else if (field.type === 'email' && value) {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(value)) {
                    isValid = false;
                    errorMessage = 'Please enter a valid email address';
                }
            }
            // Message length validation
            else if (field.name === 'message' && value && value.length < 10) {
                isValid = false;
                errorMessage = 'Please provide more details (minimum 10 characters)';
            }
            
            // Update field UI
            updateFieldUI(field, isValid, errorMessage);
            
            return isValid;
        }

        // Update field UI based on validation
        function updateFieldUI(field, isValid, errorMessage) {
            field.classList.remove('valid', 'invalid');
            
            if (field.value.trim()) {
                field.classList.add(isValid ? 'valid' : 'invalid');
            }
            
            if (!isValid && errorMessage) {
                const errorElement = document.createElement('span');
                errorElement.className = 'field-error';
                errorElement.textContent = errorMessage;
                field.parentNode.appendChild(errorElement);
            }
        }

        // Clear field error
        function clearFieldError(field) {
            const existingError = field.parentNode.querySelector('.field-error');
            if (existingError) {
                existingError.remove();
            }
        }

        // Clear all validation states
        function clearValidationStates(form) {
            const fields = form.querySelectorAll('.form-input, .form-textarea, .form-select');
            fields.forEach(field => {
                field.classList.remove('valid', 'invalid');
                clearFieldError(field);
            });
        }

        // Global error handling for this page
        window.addEventListener('error', (e) => {
            const gtm = getGTM();
            if (gtm) {
                gtm.trackError('contact_page_error', e.message, {
                    filename: e.filename,
                    lineno: e.lineno
                });
            }
        });
    </script>
</body>
</html>
